<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.placeHere.server.dao.pointShop.ProductDao">

    <resultMap id="productSelectMap" type="com.placeHere.server.domain.Product">
        <result property="prodNo" column="prod_no" jdbcType="INTEGER"/>
        <result property="prodName"	column="prod_name" jdbcType="VARCHAR"/>
        <result property="prodDetail" column="prod_detail" jdbcType="VARCHAR"/>
        <result property="prodPrice" column="prod_price" jdbcType="INTEGER"/>
        <result property="prodImg1" column="prod_img1" jdbcType="VARCHAR"/>
        <result property="prodImg2" column="prod_img2" jdbcType="VARCHAR"/>
        <result property="prodImg3" column="prod_img3" jdbcType="VARCHAR"/>
        <result property="prodCateNo" column="prod_category_no" jdbcType="INTEGER"/>
        <result property="prodCateName" column="prod_category_name" jdbcType="VARCHAR"/>
        <result property="regDt" column="reg_dt" jdbcType="DATE"/>
        <result property="prodStatus" column="prod_status" jdbcType="BOOLEAN"/>
    </resultMap>

    <insert id="addProduct"	parameterType="com.placeHere.server.domain.Product">
        INSERT INTO product( prod_name , prod_detail , prod_price , prod_status , prod_img1,prod_img2,prod_img3, prod_category_no, prod_category_name, reg_dt
        )
        VALUES	 (	#{prodName} , #{prodDetail:VARCHAR} , #{prodPrice:INTEGER} , #{prodStatus:BOOLEAN} , #{prodImg1:VARCHAR} , #{prodImg2:VARCHAR} , #{prodImg3:VARCHAR} ,#{prodCateNo:INTEGER},#{prodCateName:VARCHAR}, CURRENT_DATE)
    </insert>

    <select id="getProduct"	parameterType="int"	resultMap="productSelectMap">
        SELECT
            prod_no , prod_name , prod_detail , prod_price , prod_status , prod_img1,prod_img2,prod_img3, prod_category_no ,prod_category_name, reg_dt
        FROM product
        WHERE prod_no = #{prodNo}
    </select>
<!--    <select id="getProduct"	parameterType="int"	resultMap="productSelectMap">-->
<!--        SELECT * FROM product limit 1-->
<!--    </select>-->

    <update	id="updateProduct" parameterType="com.placeHere.server.domain.Product">
        UPDATE product
--         SET
        <set>
            prod_name = #{prodName},
            prod_detail	= #{prodDetail},
            prod_price = #{prodPrice},
            prod_status	= #{prodStatus},
            prod_img1 = #{prodImg1},
            prod_img2 = #{prodImg2},
            prod_img3 = #{prodImg3},
            prod_category_no = #{prodCateNo},
            prod_category_name = #{prodCateName}
        </set>
        WHERE prod_no = #{prodNo}
    </update>

<!--    <select id="getProductList" parameterType="search" resultMap="productSelectMap">-->
<!--        SELECT prod_no, prod_name, prod_price, prod_status, prod_img1-->
<!--        FROM product-->
<!--&lt;!&ndash;        <if test="searchCondition != null">&ndash;&gt;-->
<!--&lt;!&ndash;            <where>&ndash;&gt;-->
<!--&lt;!&ndash;                <if test="searchKeyword != null and searchKeyword != ''">&ndash;&gt;-->
<!--&lt;!&ndash;                    prod_name LIKE '%'||#{searchKeyword}||'%'&ndash;&gt;-->
<!--&lt;!&ndash;                </if>&ndash;&gt;-->
<!--&lt;!&ndash;                <if test="searchPriceBigger != 0">&ndash;&gt;-->
<!--&lt;!&ndash;                    AND prod_price &gt;= #{searchPriceBigger:INT}&ndash;&gt;-->
<!--&lt;!&ndash;                </if>&ndash;&gt;-->
<!--&lt;!&ndash;                <if test="searchPriceLess != 0">&ndash;&gt;-->
<!--&lt;!&ndash;                    AND prod_price &lt;= #{searchPriceLess:INT}&ndash;&gt;-->
<!--&lt;!&ndash;                </if>&ndash;&gt;-->
<!--&lt;!&ndash;            </where>&ndash;&gt;-->
<!--&lt;!&ndash;        </if>&ndash;&gt;-->
<!--&lt;!&ndash;        <if test="sortOrder == 'asc'">&ndash;&gt;-->
<!--&lt;!&ndash;            ORDER BY prod_price ASC&ndash;&gt;-->
<!--&lt;!&ndash;        </if>&ndash;&gt;-->
<!--&lt;!&ndash;        <if test="sortOrder == 'desc'">&ndash;&gt;-->
<!--&lt;!&ndash;            ORDER BY prod_price DESC&ndash;&gt;-->
<!--&lt;!&ndash;        </if>&ndash;&gt;-->
<!--&lt;!&ndash;        <if test="sortOrder == null">&ndash;&gt;-->
<!--&lt;!&ndash;            ORDER BY prod_no&ndash;&gt;-->
<!--&lt;!&ndash;        </if>&ndash;&gt;-->
<!--        ORDER BY prod_no-->
<!--    </select>-->

</mapper>