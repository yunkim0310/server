<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.placeHere.server.dao.admin.AdminDao">

    <!--    <resultMap id="userSelectMap" type="user">-->
    <resultMap id="adminSelectMap" type="com.placeHere.server.domain.User">
        <id property="username" column="username" />
        <result property="id" 			        column="id" 			    jdbcType="BIGINT"  />
        <result property="username" 			column="username" 			jdbcType="VARCHAR" />
        <result property="password"	            column="password" 		    jdbcType="VARCHAR" />
        <result property="email" 	            column="email" 		        jdbcType="VARCHAR" />
        <result property="role" 				column="role" 				jdbcType="VARCHAR" />
        <result property="regDt" 				column="reg_dt" 			jdbcType="DATE"    />
        <result property="profileImg" 			column="profile_img" 		jdbcType="VARCHAR" />
        <result property="loginDt" 				column="login_dt" 			jdbcType="DATE"    />
        <result property="updateDt" 			column="update_dt" 			jdbcType="DATE"    />
        <result property="gender" 		        column="gender" 			jdbcType="VARCHAR" />
        <result property="birth" 		        column="birth" 			    jdbcType="DATE"    />
        <result property="activeStatus" 		column="active_status" 		jdbcType="VARCHAR" />
    </resultMap>

    <!-- 회원 상세보기 -->
    <select id="getUser" parameterType="java.lang.Long" resultType="com.placeHere.server.domain.User">
        SELECT
            id          as id       ,
            username    as username ,
            password    as password ,
            email       as email    ,
            role        as role     ,
            active_status as activeStatus,
            reg_dt      as regDt    ,
            profile_img as profileImg,
            login_dt    as loginDt  ,
            update_dt   as updateDt ,
            gender      as gender   ,
            birth       as birth
        FROM user
        WHERE id = #{id}
    </select>

    <select id="getUserList" resultType="com.placeHere.server.domain.User">
        SELECT
            id          as id       ,
            username    as username ,
            password    as password ,
            email       as email    ,
            role        as role     ,
            active_status as activeStatus,
            reg_dt      as regDt    ,
            profile_img as profileImg,
            login_dt    as loginDt  ,
            update_dt   as updateDt ,
            gender      as gender   ,
            birth       as birth
        FROM user
        where role = 'ROLE_USER'
    </select>

    <select id="getStoreList" resultType="com.placeHere.server.domain.User">
        SELECT
            id          as id       ,
            username    as username ,
            password    as password ,
            email       as email    ,
            role        as role     ,
            active_status as activeStatus,
            reg_dt      as regDt    ,
            profile_img as profileImg,
            login_dt    as loginDt  ,
            update_dt   as updateDt ,
            gender      as gender   ,
            birth       as birth
        FROM user
        where role = 'ROLE_STORE'
    </select>

    <select id="getRsrvList" resultType="com.placeHere.server.domain.Reservation">
        SELECT
            rsrv_no     as rsrvNo       ,
            user_name   as userName     ,
            rsrv_status as rsrvStatus   ,
            rsrv_dt     as rsrvDt       ,
            rsrv_person as rsrvPerson   ,
            amount      as amount       ,
            rsrv_number as rsrvNumber   ,
            rsrv_req    as rsrvReq      ,
            reason      as reason       ,
            rsrv_create_time as rsrvCreateTime,
            store_name  as storeName,
            store_addr  as storeAddr,
            rsrv_number as rsrvNumber
        FROM reservation
        ORDER BY    rsrv_no DESC
    </select>

    <select id="getRsrv" parameterType="int" resultType="com.placeHere.server.domain.Reservation">
        SELECT
            rsrv_no     as rsrvNo       ,
            user_name   as userName     ,
            rsrv_status as rsrvStatus   ,
            rsrv_dt     as rsrvDt       ,
            rsrv_person as rsrvPerson   ,
            amount      as amount       ,
            rsrv_number as rsrvNumber   ,
            rsrv_req    as rsrvReq      ,
            reason      as reason       ,
            rsrv_create_time as rsrvCreateTime,
            store_name  as storeName,
            store_addr  as storeAddr,
            rsrv_number as rsrvNumber
        FROM reservation
        WHERE rsrv_no = #{id}
    </select>


</mapper>