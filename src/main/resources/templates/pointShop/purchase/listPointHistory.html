<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">
<title>PlaceHere</title>

<link th:insert="~{common/import :: importFragment}">

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-pzjw8f+ua7Kw1TIq0RtvO+fi6QxfhCpCz2vhK4U6Xvn8PBxJg4mtLOefW4Llmhks" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="https://code.jquery.com/ui/1.14.0/jquery-ui.js"></script>


<link rel="stylesheet" href="/css/templates/collection_detail.css">
<link rel="stylesheet" href="/css/templates/regist_hp.css">
<link href="/css/templates/mypage.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<!--    <link href="/css/templates/collection_detail.css" rel="stylesheet">-->
<link href="/css/templates/style.css" rel="stylesheet">
<!--    <script src="/javascript/templates/script.js" type="text/javascript"></script>-->
<script src="/javascript/pointShop/listPointHistory.js"></script>

    <style>
        /*!* 기본 스타일 *!*/
        /*body {*/
        /*    font-family: 'Arial', sans-serif;*/
        /*    background-color: #ffffff;*/
        /*    margin: 0;*/
        /*    padding: 0;*/
        /*    color: #333;*/
        /*}*/

        /*!*!* 제목 스타일 *!*!*/
        /*!*h1, h3 {*!*/
        /*!*    text-align: center;*!*/
        /*!*    font-size: 2.5rem;*!*/
        /*!*    margin-bottom: 20px;*!*/
        /*!*    color: #333;*!*/
        /*!*}*!*/

        /*h3 {*/
        /*    font-size: 1.5rem;*/
        /*}*/

        /*!* 테이블 영역 스타일 *!*/
        /*.container {*/
        /*    width: 70%;*/
        /*    margin: 0 auto;*/
        /*    padding-top: 30px;*/
        /*}*/

        /*!* 테이블 스타일 *!*/
        /*table {*/
        /*    width: 80%;*/
        /*    border-collapse: collapse;*/
        /*    margin-bottom: 20px;*/
        /*    background-color: #fff;*/
        /*    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);*/
        /*}*/

        /*th, td {*/
        /*    padding: 12px 20px;*/
        /*    text-align: center;*/
        /*    font-size: 1rem;*/
        /*    border-bottom: 1px solid #ddd;*/
        /*}*/

        /*th {*/
        /*    background-color: #f5f5f5;*/
        /*    font-weight: bold;*/
        /*    color: #333;*/
        /*}*/

        /*td {*/
        /*    background-color: #fff;*/
        /*    color: #333;*/
        /*}*/

        /*td input[type="hidden"] {*/
        /*    display: none;*/
        /*}*/

        /*!* 색상 스타일 *!*/
        /*.red {*/
        /*    color: red;*/
        /*}*/

        /*.blue {*/
        /*    color: blue;*/
        /*}*/

        /*!* 반응형 디자인 *!*/
        /*@media (max-width: 768px) {*/
        /*    table {*/
        /*        font-size: 0.9rem;*/
        /*    }*/

        /*    th, td {*/
        /*        padding: 8px 12px;*/
        /*    }*/

        /*    h1 {*/
        /*        font-size: 2rem;*/
        /*    }*/

        /*    h3 {*/
        /*        font-size: 1.2rem;*/
        /*    }*/
        /*}*/
        /*.point-header {*/
        /*    background-color: #ffffff;*/
        /*    padding: 30px;*/
        /*    text-align: center;*/
        /*    margin-bottom: 30px;*/
        /*}*/

        /*.point-header h1 {*/
        /*    color: #333;*/
        /*    font-size: 2rem;*/
        /*    font-weight: bold;*/
        /*    margin-top: 10px;*/
        /*}*/

        /*.current-point {*/
        /*    background-color: #ffffff; !* 배경색을 흰색으로 설정 *!*/
        /*    color: #333; !* 텍스트 색상은 어두운 색으로 설정 *!*/
        /*    padding: 20px;*/
        /*    text-align: left; !* 텍스트 왼쪽 정렬 *!*/
        /*    font-size: 1.2rem;*/
        /*    !*margin-bottom: 30px;*!*/
        /*    display: block; !* 텍스트가 왼쪽으로 정렬되도록 block으로 설정 *!*/
        /*}*/

        /*.current-point h1 {*/
        /*    margin: 10%; !* 기본 여백 제거 *!*/
        /*    font-size: 1.8rem; !* 제목 크기 조정 *!*/
        /*    text-align: left;*/
        /*}*/



        /* 테이블 전체 텍스트 크기 */
        .point-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1.2rem; /* 전체 테이블의 폰트 크기를 키움 */
        }

        .point-table th, .point-table td {
            /*padding: 10px;*/
            text-align: center;
            font-size: 1.2rem; /* th와 td의 텍스트 크기 설정 */
        }

        /* 거래 포인트의 색상 */
        .red {
            color: #FB5555;
            font-weight: bold;
        }

        .blue {
            color: #4880FF;
            font-weight: bold;
        }

        .product-card {
            display: flex; /* flexbox 사용 */
            flex-direction: row; /* 이미지와 정보가 좌우로 배치되도록 설정 */
            align-items: center; /* 세로 가운데 정렬 */
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            width: 100%;
            height: 80px; /* 높이를 적당히 설정 */
            transition: transform 0.3s ease-in-out;
        }

        .product-card:hover {
            transform: translateY(-5px); /* 마우스를 올렸을 때 살짝 올라가는 효과 */
        }

        .product-img {
            width: 40%; /* 이미지 영역을 전체 카드의 40%로 설정 */
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .product-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /*.product-info {*/
        /*    width: 60%; !* 정보 영역을 전체 카드의 60%로 설정 *!*/
        /*    padding: 15px;*/
        /*    text-align: left;*/
        /*}*/

        /*.product-info h3 {*/
        /*    font-size: 1.2rem;*/
        /*    margin-bottom: 10px;*/
        /*}*/

        /*.product-info p {*/
        /*    font-size: 1rem;*/
        /*    color: #555;*/
        /*    margin: 5px 0;*/
        /*}*/

        .product-info {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;  /* 각 항목을 왼쪽과 오른쪽 끝으로 배치 */
            gap: 10px;  /* 항목 사이의 간격을 30px로 설정 (원하는 값으로 조정 가능) */
            text-align: center;
            font-size: 20px;
            margin-left: 30px;
            min-width: 700px;
            width: 90%;
        }

        .point-info {
            margin: 0;
            font-size: 16px;
            min-width: 120px;  /* 각 항목에 최소 너비를 설정하여 일관된 너비를 유지 */
            text-align: center;  /* 텍스트를 중앙 정렬 */
            font-weight: bold;
        }

        /*.product-card:after {*/
        /*    content: '▶'; !* 화살표 아이콘 *!*/
        /*    font-size: 1.5rem; !* 화살표 크기 *!*/
        /*    color: #4880FF; !* 화살표 색상 *!*/
        /*    !*position: absolute;*!*/
        /*    right: 10px; !* 카드 오른쪽 끝에 배치 *!*/
        /*    top: 50%; !* 세로 중앙 정렬 *!*/
        /*    transform: translateY(-50%); !* 정확한 중앙 정렬 *!*/
        /*    cursor: pointer; !* 클릭 가능하도록 설정 *!*/
        /*    !*margin-right:10px;*!*/
        /*}*/

        /* 상품 액션 버튼 */
        .product-actions {
            display: flex;
            justify-content: space-around;
            padding: 10px;
            background-color: #f9f9f9;
        }

        .css-luwwab {
            /*display: flex;*/
            width: 100%;
            padding: 50px 0px 80px;
            margin: 0px auto;
            flex-direction: row;
            -webkit-box-pack: justify;
        }


        /*.product-img {*/
        /*    width: 100%;*/
        /*    height: 200px;*/
        /*    !*display: flex;*!*/
        /*    justify-content: center;*/
        /*    align-items: center;*/
        /*    !*background-color: #f0f0f0; !* 기본 배경색 *!*!*/
        /*    background-color: #fff;*/
        /*    color: #999; !* 텍스트 색상 *!*/
        /*    font-size: 16px; !* 텍스트 크기 *!*/
        /*    text-align: center;*/
        /*    border: 1px solid #ddd; !* 이미지를 표시하지 않을 때 테두리 표시 *!*/
        /*}*/

        /*!*.product-img img {*!*/
        /*!*    display: none; !* 이미지가 표시되지 않을 때 *!*!*/
        /*!*}*!*/


        /*.product-img img {*/
        /*    width: 100%; !* 가로를 100%로 설정 *!*/
        /*    height: 100%; !* 세로도 100%로 설정 *!*/
        /*    object-fit: cover; !* 이미지 비율을 유지하면서 영역을 채움 *!*/
        /*    display: block;*/
        /*}*/

        /*!*.product-img img {*!*/
        /*!*    width: 100%; !* 가로를 100%로 설정 *!*!*/
        /*!*    height: 100%; !* 세로도 100%로 설정 *!*!*/
        /*!*    object-fit: contain; !* 이미지 비율을 유지하면서 영역을 채움 *!*!*/
        /*!*    display: block;*!*/
        /*!*}*!*/

        /*.product-img span {*/
        /*    font-size: 1.2rem;*/
        /*    font-weight: bold;*/
        /*    color: #666;*/
        /*}*/
        /* 폼을 왼쪽 정렬로 배치하는 스타일 */
        .form-inline {
            /*display: flex;*/
            flex-direction: column;  /* 세로로 나열 */
            align-items: flex-start;  /* 왼쪽 정렬 */
            margin-left: 380px;  /* 왼쪽 여백 추가 */
            /*background-color: #f4f7f6;  !* 연한 회색 배경색 *!*/
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            /*border: 1px solid #ddd;*/
            border: 2px solid #4880FF;
            margin-top: 0px;
        }

        /* 각 폼 그룹 간의 여백을 주어 구분 */
        .form-group {
            margin-bottom: 15px;  /* 폼 그룹 간의 간격 */
        }

        /* 레이블과 입력 필드 사이의 간격 */
        .form-group strong {
            font-size: 1.1rem;
            margin-right: 10px;
            font-weight: bold;
        }

        /* 입력 필드 크기 조정 */
        .form-group input[type="text"] {
            width: 220px;
            padding: 8px;
            margin-right: 10px; /* label과의 간격을 위한 여백 */
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        /* 버튼 스타일 */
        .form-group button {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            margin-top: 10px;  /* 버튼 위쪽에 여백 추가 */
            /*margin: 0;*/
            /*padding: 0;*/
            /*border: 0;*/
            /*-webkit-appearance: none;*/
            /*appearance: none;*/
            /*border-radius: 0;*/
            /*box-shadow: none;*/
            /*cursor: pointer;*/
            /*font-family: inherit;*/
            /*font-size: inherit;*/
            /*background: 0 0;*/
            /*color: #000;*/
        }

        /* 버튼 기본 스타일 */
        .btn-primary {
            background-color: #4880FF;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
        }

        .btn-primary:hover {
            background-color: #005bb5;
        }

        .btn-default {
            background-color: #e0e0e0;
            color: #333;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
        }

        .btn-default:hover {
            background-color: #cccccc;
        }

        /* 상품 리스트 그리드 */
        .product-list {
            display: grid;
            /*grid-template-columns: repeat(3, 1fr); !* 한 줄에 3개 열 *!*/
            gap: 20px; /* 상품 간의 간격 */
            margin: 0px;
            min-height: 350px;
        }

        body {
            scrollbar-color: white;
            scrollbar-width: none;
            -ms-overflow-style: none;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            /*width: 80%;*/
            /*max-width: 100%;  !* 최대 너비도 100%로 설정 *!*/
            margin: 0 auto;
        }

        /* 헤더 스타일 */
        .point-header {
            background-color: #ffffff;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }

        .point-header h1 {
            color: #333;
            font-size: 2rem;
            font-weight: bold;
            margin-top: 10px;
        }

        /* 테이블 스타일 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            background-color: #ffffff;
        }

        table th, table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }

        table th {
            background-color: #f2f2f2;
        }

        /* 버튼과 입력 필드 스타일 */
        .btn-primary.view, .btn-primary.edit {
            margin: 5px;
        }

        .form-group input[type="text"] {
            width: 220px;
            margin-bottom: 10px;
        }

        input[type="radio"] {
            cursor: pointer;
        }

        [type="radio"]:checked {
            /* min-width: 24px;
            min-height: 24px;
            display: inline-block;
            position: relative;
            border-radius: 50%;
            background-color: #ff3d00; */
            transition: border 0.5s ease-in-out;

            /* border: 0.4em solid tomato; */
            /*border: 0.4em solid #ff3d00;*/
            border: 0.4em solid #4880FF;
        }


        /* 카테고리 레이블 스타일 */
        .category-label {
            /*border: 2px solid #4880FF;*/
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            font-size: 16px;
            color: #333;
            margin-bottom: 12px;
            font-weight: bold;
            display: block;
            background-color: #fff;
        }

        /* 드롭다운 스타일 */
        .category-select {
            width: 100%;
            padding: 12px 20px;
            font-size: 16px;
            color: #333;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            outline: none;
            cursor: pointer;
            appearance: none; /* 기본 브라우저 스타일 제거 */
            transition: all 0.3s ease-in-out;
            box-sizing: border-box;
            position: relative;
        }

        /* 드롭다운 마우스 오버 시 스타일 */
        .category-select:hover {
            border-color: #888;
            background-color: #fafafa;
        }

        /* 드롭다운 포커스 시 스타일 */
        .category-select:focus {
            border-color: #4a90e2;
            background-color: #f7faff;
            box-shadow: 0 0 5px rgba(74, 144, 226, 0.6);
        }

        /* 드롭다운 아이콘을 추가하기 위한 스타일 */
        .category-select::after {
            content: '▼'; /* 화살표 모양 */
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            font-size: 12px;
            color: #999;
        }

        /* 드롭다운 항목 스타일 */
        .category-select option {
            padding: 12px 20px;
            font-size: 16px;
            color: #333;
            background-color: #fff;
            border: none;
            transition: background-color 0.3s ease;
        }

        /* 옵션에 마우스 오버 시 색상 변경 */
        .category-select option:hover {
            background-color: #f0f0f0;
        }


        .product-header {
            display: flex; /* flexbox 사용 */
            justify-content: flex-start; /* 왼쪽 정렬 */
            align-items: center; /* 세로 중앙 정렬 */
            margin-bottom: 10px; /* 헤더와 다른 내용 사이의 간격 */
        }

        .product-header h1 {
            font-size: 15px;
            margin: 0; /* 기본 margin 제거 */
        }

        .product-header span {
            font-size: 12px;
            margin-left: 10px; /* h1과 구매번호 간의 간격 */
        }

        /* footer 스타일 */
        .footer {
            /*position: fixed;  !* 화면 하단에 고정 *!*/
            bottom: 0;        /* 화면 아래쪽에 위치 */
            left: 0;          /* 화면 왼쪽에 맞춤 */
            width: 100%;      /* 화면 너비를 100%로 설정 */
            background-color: #f8f8f8; /* 배경색 */
            color: #555555;   /* 텍스트 색상 */
            text-align: left; /* 텍스트를 중앙 정렬 */
            font-size: 12px;   /* 글자 크기 작게 설정 */
            padding: 10px 0;   /* 위 아래 여백 */
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1); /* 그림자 효과 */
        }

        .footer p {
            margin: 0; /* p 태그의 기본 여백 제거 */
        }

    </style>

<script type="text/javascript">
    $(function () {

        function paging(page) {

            $("form")[0].reset();
            $("input[name='page']").val(page);

            $("form").attr("action", "/purchase/listPointHistory").attr("method", "post").submit()

        }

        pageNavigator(paging);

    });


    function updateSearchKeyword() {
        // 카테고리 선택 값을 searchKeyword input에 자동으로 채워넣음
        var selecteddepType = document.getElementById('depType').value;
        console.log(selecteddepType);
        if (selecteddepType !== "0") { // 선택된 값이 '0'이 아닐 때만
            // 쉼표 제거 및 값을 입력
            document.getElementById('searchKeyword').value = selectedCategory.replace(',', '');
        }else{
            self.location = "/purchase/listPointHistory";
        }
        $("form").attr("method", "POST").attr("action", "/purchase/listPurchase").submit();
    }

</script>

</head>
<body>
<div class="container">
    <div class="css-luwwab eug5r8l1">
        <div class="css-833hqy ecbxmj4">
            <div class="side" style="position:fixed; margin-left: 138px;"><br/><br/>
                <div class="css-1v4whg ecbxmj3" style="font-weight: 600; font-size: 28px; line-height: 35px; color: rgb(51, 51, 51); height: 75px;
    padding: 5px 0px 35px 1px;">포인트 내역</div>
                <div th:replace="~{pointShop/getPointShopAside :: getPointShopAside}"></div>
            </div>
        </div>
        <div class="row" style="margin-top: 50px; z-index:0; width: 800px; margin-right: 420px; margin-left: auto;">
            <div class="col-md-3 text-left" style="margin-top: 90px; position:fixed; margin-left:500px; margin-right:120px; text-align: center;">
                <form name="detailForm" th:action="@{/purchase/listPointHistory}" method="post">
                    <input type="hidden" name="page" value="1">
<!--                    <div class="form-group">-->
<!--                        <div id="searchSorting">-->
<!--                            <label for="depType" class="depType-label">-->
<!--                                <select name="depType" id="depType" onchange="updateSearchKeyword();">-->
<!--                                    <option>선택하세요.</option>-->
<!--                                    <option value="">전체</option>-->
<!--                                    <option value="적립">적립된 포인트만</option>-->
<!--                                    <option value="차감">차감된 포인트만</option>-->
<!--                                </select><br/>-->
<!--                            </label>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="form-group">-->
<!--                        <br/><strong>검색어</strong><br/><br/>-->
<!--                        <input type="text" class="form-control" id="searchKeyword" name="searchKeyword" placeholder="상품명/카테고리를 입력하세요"-->
<!--                               th:value="${search.searchKeyword != null ? search.searchKeyword : ''}">&nbsp;<br/>-->
<!--                        <br/>-->
<!--                    </div>-->
                </form>
            </div>
            <h3 style="font-size: 30px; font-weight: bold;">포인트 내역</h3><br/><br/><br/><br/>
            <div class="col-md-9 text-right">
                <div class="current-point">
                    <h3 style="font-weight: bold; font-size:20px;"><span style="color:#4880FF;" th:text="${search.username}"></span>
                        님의 포인트 <br/><br/><span style="font-size:30px;" th:text="${#numbers.formatInteger(currPoint, 3, 'COMMA')+ 'P'}"></span></h3>
                </div><br/><br/>
                <hr class="separator"><br/><br/><br/><br/>
                <table>
                    <div>
                        <div class="product-list">
                            <div th:each="point : ${pointHistoryList}" class="product-card">
                                <div class="product-info">
                                    <div class="transaction-point">
                                        <p th:text="${point.depType == '상품 구매' ? '-' + #numbers.formatInteger(point.tranPoint, 3, 'COMMA')+ 'P' : '+' + #numbers.formatInteger(point.tranPoint, 3, 'COMMA')+ 'P'}"
                                           th:class="${point.depType == '상품 구매' ? 'red' : 'blue'}">거래 포인트</p>
                                    </div>
                                    <div class="transaction-type">
                                        <p th:text="${point.depType}">거래 유형</p>
                                    </div>
                                    <div class="transaction-date">
                                        <p th:text="${point.pointDt}">거래일</p>
                                    </div>
                                    <div class="current-point">
                                        <p th:text="${#numbers.formatInteger(point.currPoint, 3, 'COMMA')+ 'P'}">보유 포인트</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
<!--                    <thead>-->
<!--                    <tr>-->
<!--                        <th>거래 포인트</th>-->
<!--                        <th>거래 유형</th>-->
<!--                        <th>거래일</th>-->
<!--                        <th>보유 포인트</th>-->
<!--                    </tr>-->
<!--                    </thead>-->
<!--                    <tbody>-->
<!--                    <tr th:each="point : ${pointHistoryList}">-->
<!--                        <td th:text="${point.depType == '상품 구매' ? '-' + point.tranPoint + 'P' : '+' + point.tranPoint + 'P'}"-->
<!--                            th:class="${point.depType == '상품 구매' ? 'red' : 'blue'}">거래 포인트</td>-->
<!--                        <td th:text="${point.depType}">거래 유형</td>-->
<!--                        <td th:text="${point.pointDt}">거래일</td>-->
<!--                        <td th:text="${point.currPoint}+P">보유 포인트</td>-->
<!--                    </tr>-->
<!--                    </tbody>-->
                </table>
            </div>
        </div>

    </div>
</div>

<th:block th:insert="~{common/paging :: pagingFragment}"></th:block>
</body>
</html>
