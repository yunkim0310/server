<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>PlaceHere</title>

    <link th:insert="~{common/import :: importFragment}">

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-pzjw8f+ua7Kw1TIq0RtvO+fi6QxfhCpCz2vhK4U6Xvn8PBxJg4mtLOefW4Llmhks" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://code.jquery.com/ui/1.14.0/jquery-ui.js"></script>


    <link rel="stylesheet" href="/css/templates/collection_detail.css">
    <link rel="stylesheet" href="/css/templates/regist_hp.css">
    <link href="/css/templates/mypage.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!--    <link href="/css/templates/collection_detail.css" rel="stylesheet">-->
    <link href="/css/templates/style.css" rel="stylesheet">
    <!--    <script src="/javascript/templates/script.js" type="text/javascript"></script>-->

    <script src="/javascript/pointShop/listPurchase.js"></script>
    <link rel="stylesheet" href="/css/pointShop/listPurchase.css">

</head>
<body>
<!--<br/><br/>-->
<div class="container">
    <div class="css-luwwab eug5r8l1">
        <div class="css-833hqy ecbxmj4">
            <div class="side" style="margin-top:50px;position:fixed; margin-left: 138px;">
                <div class="css-1v4whg ecbxmj3" style="font-weight: 600; font-size: 28px; line-height: 35px; color: rgb(51, 51, 51); height: 75px;
    padding: 5px 0px 35px 1px;">구매 목록</div>
                <div th:replace="~{pointShop/getPointShopAside :: getPointShopAside}"></div>
            </div>
        </div>

        <div class="row" style="width: 800px; margin-right: 30%; margin-left: auto;">
            <!-- 왼쪽 부분: 3컬럼 (정렬 및 검색폼) -->
            <div class="col-md-3 text-left" style="margin-top: 100px; position:fixed; margin-left:930px; margin-right:20px;">
                <form class="form-inline" name="detailForm" th:action="@{/purchase/listPurchase}" method="post">
                    <input type="hidden" name="page" value="1">
                    <div class="form-group">
                        <div id="searchSorting">
                            <strong>정렬</strong><br/><br/>
                            <label>
                                <input type="radio" name="order" value="default" checked> 최신순
                                <!--                                th:checked="${search.order == 'default'}"-->
                            </label><br/><br/>
                            <label>
                                <input type="radio" name="order" value="asc" th:checked="${search.order == 'asc'}"> 가격 낮은순
                            </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <label>
                                <input type="radio" name="order" value="desc" th:checked="${search.order == 'desc'}"> 가격 높은순
                            </label><br/><br/><br/>
                            <label for="prodCateNo" class="category-label">
                                <select name="prodCateNo" id="prodCateNo" onchange="updateSearchKeyword()">
                                    <option>카테고리를 선택하세요.</option>
                                    <option value="배달 상품권">배달 상품권</option>
                                    <option value="베이커리 교환권">베이커리 교환권</option>
                                    <option value="카페 교환권">카페 교환권</option>
                                    <option value="아이스크림 교환권">아이스크림 교환권</option>
                                    <option value="치킨 교환권">치킨 교환권</option>
                                    <option value="버거/피자 교환권">버거/피자 교환권</option>
                                    <option value="편의점 교환권">편의점 교환권</option>
                                </select><br/>
                            </label>
                        </div>
                    </div>


                    <div class="form-group">
                        <br/><strong>검색어</strong><br/><br/>
                        <input type="text" class="form-control" id="searchKeyword" name="searchKeyword" placeholder="상품명/카테고리를 입력하세요"
                               th:value="${search.searchKeyword != null ? search.searchKeyword : ''}">&nbsp;<br/>
                        <br/>
                        <strong>가격 범위</strong><br/><br/>
                        <input type="text" id="priceMin" name="priceMin" class="form-control" placeholder="최소 금액" th:value="${search.priceMin}"><br/>
                        <input type="text" id="priceMax" name="priceMax" class="form-control" placeholder="최고 금액" th:value="${search.priceMax}">&nbsp;
                        <br/><br/>
                        <!--                        <div class="css-137ca2h e1utgeno0">-->
                        <!--                            <button class="css-18m884r e4nu7ef3" name="submitBtn" type="submit" width="240"-->
                        <!--                                    height="56" radius="3" style="margin-bottom: auto; margin-top: 12px; width: 100px; text-align: center;background-color: #4880FF;">-->
                        <!--                                <span class="css-ymwvow e4nu7ef1 submit-button-span">검&nbsp;색</span>-->
                        <!--                            </button>-->
                        <!--                        </div>-->
                        <!--                        <button type="submit" class="btn-default" style="margin-left: 80px; background-color: #4880FF; color: white; text-align: center;">검색</button>&nbsp;-->
                        <!--                        <button type="button" class="btn-confirm" style="margin-left: 75px; background-color: #4880FF; color: white; align-items: center;">초기화</button>&nbsp;-->

                        <div style="white-space: nowrap; text-align: center;">
                            <button type="submit" class="btn-default" style="background-color: #4880FF; color: white; text-align: center; display: inline-block;">검색</button>
                            <button type="button" class="btn-confirm" style="background-color: #646D7A; color: white; text-align: center; display: inline-block;">리셋</button>
                        </div>

                        <!--                        <button type="submit" class="btn-primary confirm">초기화</button>-->
                    </div>
                </form>
            </div><br/><br/><br/>
            <h3 style="font-size: 30px; font-weight: bold;">🧾&nbsp;구매 목록</h3>
            <div class="col-md-9 text-right">
                <table>
                    <div th:if="${prodTotalCnt != 0}">
                        <div class="search-header __autohide" style="background: none; top: 48px;">

                            <div class="__search-result-header mb-20">
                                <div class="__total-count" style="min-width: 121px">
                                    <strong th:text="|총 ${prodTotalCnt}개의 구매한 상품|">104</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="product-list" >
                        <div th:each="purchase : ${purchaseList}" class="product-card" th:data-tran-no="${purchase.tranNo}">
                            <div class="product-img" style="width:25%; max-height:500px; display: block;">
                                <!--                                <img th:src="${product.prodImg1}" alt="상품 대표 이미지">-->
                                <!--                                <img th:src="@{${product.prodImg1}}" alt="상품 대표 이미지">-->
                                <img th:src="${url +'point/product/'+ purchase.purchaseProd.prodImg1}" alt="상품 대표 이미지">
                                <!--                                <img th:src="/WorkSpace/placeHere/server/src/main/resources/static/file/pointShop/0.png">-->
                            </div>
                            <div class="product-info">
                                <span style="font-size: 12px; margin-left: 490px;" th:text="'구매번호&nbsp;&nbsp;'+${purchase.tranNo}"></span>
                                <div class="product-header">
                                    <h1 class="name" th:text="${purchase.pointDt}+'&nbsp;&nbsp;구매'" style="font-size: 15px;">상품명</h1>
                                </div>
                                <p th:text="${purchase.purchaseProd.prodCateName}">상품 카테고리</p>
                                <h3 th:text="${purchase.purchaseProd.prodName}">상품명</h3>
                                <p style="color: #FB5555; font-weight: bold;" th:text="${#numbers.formatInteger(purchase.purchaseProd.prodPrice, 3, 'COMMA')+ 'P'}">상품 가격</p>
                            </div>
                        </div>
                        <div th:if="${prodTotalCnt == 0}" style="margin-top:100px; text-align: center">
<!--                            <h1>구매한 상품이 없습니다.</h1>-->
                            <div class="product-container" style="text-align: center; font-size: 30px; font-weight: bold;">
                                <h3>구매한 상품이 없습니다.</h3>
                            </div>
                        </div>
                        <div th:if="${prodTotalCnt == 0}" style="text-align: center">
<!--                            <div class="button-container">-->
<!--                                <button type="button" class="btn-primary list">둘러보기</button>-->
<!--                            </div><br/><br/>-->
                            <div class="button-container">
                                <div class="css-137ca2h e1utgeno0">
                                    <button class="css-18m884r e4nu7ef3" id="confirm" name="confirmBtn" type="button" width="240"
                                            height="56" radius="3" style="margin-bottom: auto; margin-top: 12px; width: 100px; text-align: center;background-color: #4880FF;">
                                        <span class="css-ymwvow e4nu7ef1 submit-button-span">둘러보기</span>
                                    </button>
                                </div>
                            </div><br/><br/>
                        </div>
                    </div>
                </table>
            </div>
        </div>
    </div>
</div>
<div th:if="${prodTotalCnt != 0}">
<th:block th:insert="~{common/paging :: pagingFragment}"></th:block>
</div>
</body>
</html>