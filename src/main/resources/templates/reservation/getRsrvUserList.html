<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <link th:insert="~{common/import :: importFragment}">
    <link rel="stylesheet" href="/css/templates/style.css">
    <link rel="stylesheet" href="/css/templates/regist_hp.css">
    <link rel="stylesheet" href="/css/reservation/getRsrvUserList.css">
    <script type="module" src="/javascript/store/searchStore.js"></script>
    <script src="/javascript/reservation/getRsrvUserList.js"></script>
  </head>
  <body>

    <h1 style="font-size: 27px; font-family: Arial, Helvetica, sans-serif; font-weight: bold; color: black; margin-top: 25px;" ><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;예약 목록</h1>

    <div class="container">
      <!-- 예약 리스트 -->
      <div class="reservation-list">
        <table>
          <tbody>
            <div class="reservation-item" th:each="reservation : ${reservations}" style="cursor: pointer;">
              <div class="reservation-header">
                <span class="reservation-date" th:text="${#dates.format(reservation.rsrvDt, 'yyyy.MM.dd')}"/>
              </div>
                <!-- 본문 -->
              <div class="reservation-body">
                <div class="reservation-details">
                  <br/>
                  <br/>
                  <p><strong>예약 시간&nbsp;&nbsp;&nbsp;</strong> <span th:text="${#dates.format(reservation.rsrvDt, 'HH:mm')}"/></p>
                  <p><strong>매 &nbsp;장&nbsp; 명&nbsp;&nbsp;&nbsp;</strong> <span th:text="${reservation.storeName}"/></p>
                  <p><strong>전화 번호&nbsp;&nbsp;&nbsp;&nbsp;</strong> <span th:text="${reservation.rsrvNumber}" data-phone/></p>
                  <p><strong>예약 인수&nbsp;&nbsp;&nbsp;&nbsp;</strong> <span th:text="${reservation.rsrvPerson}"/>명</p>
                  <p><strong>예약 번호&nbsp;&nbsp;&nbsp;&nbsp;</strong> <span class="reservation-number" th:text="${reservation.rsrvNo}"/></p>
                </div>
                <div>
                  <img class="img"
                       th:src="${(reservation.store.storeImg1.indexOf('_') != -1)? '/images/store/store/'+reservation.store.storeImg1 : url + reservation.store.storeImg1}"/>
                </div>
              </div>
                <!-- 상태 -->
              <div class="reservation-status">
                <span th:text="${reservation.rsrvStatus}"/>
                <!-- 리뷰 작성 버튼 -->
                <div class="status-actions">
                  <button class="review-button" th:if="${reservation.rsrvStatus == '이용 완료'}" th:text="'리뷰 작성'"></button>
                </div>
              </div>
            </div>
          </tbody>
        </table>
      </div>

      <!-- 검색 폼 -->
      <form id="searchForm" name="searchForm">
        <!-- 예약 상태 -->
        <!-- 유저 이름 (필수) -->
        <input type="hidden" name="userName" th:value="${param.userName}" />
        <div class="pl">
          <select id="searchKeyword" name="searchKeyword" onchange="autoSubmitForm()">
            <option value="" th:selected="${search.searchKeyword == null || search.searchKeyword == ''}">모든 상태</option>
            <option value="예약 요청" th:selected="${search.searchKeyword =='예약 요청'? 'selected' : null}">예약 요청</option>
            <option value="예약 확정" th:selected="${search.searchKeyword =='예약 확정'? 'selected' : null}">예약 확정</option>
            <option value="이용 완료" th:selected="${search.searchKeyword =='이용 완료'? 'selected' : null}">이용 완료</option>
            <option value="리뷰 완료" th:selected="${search.searchKeyword =='리뷰 완료'? 'selected' : null}">리뷰 완료</option>
            <option value="예약 취소" th:selected="${search.searchKeyword =='예약 취소'? 'selected' : null}">예약 취소</option>
            <option value="예약 거절" th:selected="${search.searchKeyword =='예약 거절'? 'selected' : null}">예약 거절</option>
          </select>

          <!-- 정렬 방식 -->
          <select id="order" name="order" onchange="autoSubmitForm()">
            <option value="desc" th:selected="${search.order == 'desc'? 'selected' : null}">내림차순</option>
            <option value="asc" th:selected="${search.order == 'asc'? 'selected' : null}">오름차순</option>
          </select>
        </div>


        <input type="hidden" name="page" th:value="1">

      </form>


    </div>
    <div class="paging-container">
    <th:block th:insert="~{common/paging :: pagingFragment}"></th:block>
    </div>
  </body>
</html>